(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{7189:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[id]",function(){return n(5789)}])},4816:function(e,t,n){"use strict";n.r(t),n.d(t,{chosenChatTutor:function(){return d},default:function(){return f}});var s=n(5893),o=n(639),r=n(3812),l=n(7741),c=n(3382),i=n(1163),a=n(7294),u=n(9367);let d="",h=e=>null==e?void 0:e.map(t=>(console.log("data in showChats: "+e),(0,s.jsxs)(o.kC,{p:3,align:"center",_hover:{bg:"gray.100",cursor:"pointer"},onClick:()=>{var e;console.log("_id in chosenChat: "+(e=t.tutor)),d=e,i.router.push("/chat/".concat(e))},children:[(0,s.jsx)(r.qE,{src:"",marginEnd:3}),(0,s.jsx)(o.xv,{children:t.tutor})]},t._id))),x=u.$j("ws://localhost:3001",{transports:["websocket","polling","flashsocket"]});function f(){let e=[],[t,n]=(0,a.useState)([]);return(0,a.useEffect)(()=>{x.on("user-chats",t=>{t.forEach(function(t){null!=t.tutor&&(console.log(t),t._id,t.messages,t.student,t.tutor,e.push(t))}),console.log("This is tempArray: "+e),n(e)})},[x]),(0,s.jsxs)(o.kC,{w:"300px",borderEnd:"1px solid",borderColor:"gray.200",direction:"column",children:[(0,s.jsxs)(o.kC,{h:"81px",w:"100%",align:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"gray.200",p:3,children:[(0,s.jsxs)(o.kC,{align:"center",children:[(0,s.jsx)(r.qE,{src:"",margin:3}),(0,s.jsx)(o.xv,{children:"Alperen Kavakli"})]}),(0,s.jsx)(l.hU,{size:"sm",isRound:!0,icon:(0,s.jsx)(c.Y4,{}),"aria-label":"Close"})]}),(0,s.jsx)(o.kC,{overflowX:"hidden",overflowY:"scroll",direction:"column",sx:{"::-webkit-scrollbar":{display:"none"}}}),h(t)]})}},5789:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(5893),o=n(639),r=n(4816),l=n(3812),c=n(7294);function i(){return(0,s.jsxs)(o.kC,{bg:"gray.100",h:"81px",w:"100%",align:"center",p:5,children:[(0,s.jsx)(l.qE,{src:"",marginEnd:3}),(0,s.jsx)(o.X6,{size:"lg",children:"user@gmail.com"})]})}var a=n(3234),u=n(979),d=n(7741),h=n(9367);let x=h.$j("ws://localhost:3001",{transports:["websocket","polling","flashsocket"]});function f(){let[e,t]=(0,c.useState)(""),n=async n=>{console.log(e),n.preventDefault(),x.emit("send-message",e,"test1",r.chosenChatTutor,"test1"),t("")};return(0,s.jsxs)(a.NI,{onSubmit:n,p:3,as:"form",children:[(0,s.jsx)(u.II,{autoComplete:"off",placeholder:"Type a message...",onChange:e=>t(e.target.value),value:e}),(0,s.jsx)(d.zx,{type:"submit",hidden:!0})]})}var p=n(9008),g=n.n(p);let j=h.$j("ws://localhost:3001",{transports:["websocket","polling","flashsocket"]}),m=e=>null==e?void 0:e.messages.map(t=>{let n="test1"===t.sender;return console.log("chat: "+e),console.log("msg: "+t.sender),new Uint32Array(10),(0,s.jsx)(o.kC,{alignSelf:n?"flex-end":"flex-start",bg:n?"green.100":"blue.100",w:"fit-content",minWidth:"100px",borderRadius:"lg",p:3,m:1,children:(0,s.jsx)(o.xv,{children:t.message})},Math.random())});function w(){let[e,t]=(0,c.useState)();return console.log("tutor to be emitted: "+r.chosenChatTutor),j.emit("join-chat","test1",r.chosenChatTutor),(0,c.useEffect)(()=>{j.on("update-chat",e=>{t(e)})},[j]),(0,s.jsxs)(o.kC,{h:"100vh",overflowX:"hidden",children:[(0,s.jsx)(g(),{children:(0,s.jsx)("title",{children:"Chat app"})}),(0,s.jsx)(r.default,{}),(0,s.jsxs)(o.kC,{flex:1,direction:"column",children:[(0,s.jsx)(i,{}),(0,s.jsx)(o.kC,{flex:1,direction:"column",pt:4,mx:5,overflowX:"scroll",overflowY:"scroll",sx:{"::-webkit-scrollbar":{display:"none"}}}),m(e),(0,s.jsx)(f,{})]})]})}},9008:function(e,t,n){e.exports=n(3121)}},function(e){e.O(0,[764,549,774,888,179],function(){return e(e.s=7189)}),_N_E=e.O()}]);